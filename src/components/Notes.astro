---
import NoteCard from "./NoteCard.astro";
import { notes } from "../data/notes";

const allNotes = Object.values(notes);
const initialCount = 4;
const initialNotes = allNotes.slice(0, initialCount);
const extraNotes = allNotes.slice(initialCount);
const hasMore = extraNotes.length > 0;
---

<div class="flex flex-col items-start w-full px-2">
    <div class="flex flex-col w-full">
        {initialNotes.map((note) => <NoteCard {...note} />)}
    </div>

    {
        hasMore && (
            <>
                <input type="checkbox" id="expand-notes" class="peer hidden" />
                <div class="hidden peer-checked:flex flex-col w-full">
                    {extraNotes.map((note) => (
                        <NoteCard {...note} />
                    ))}
                </div>
                <label
                    for="expand-notes"
                    class="linkText mt-4 cursor-pointer hover:opacity-60 self-start select-none"
                >
                    <span class="view-more" data-text="View More">
                        View More
                    </span>
                    <span class="view-less hidden" data-text="See less">
                        See less
                    </span>
                </label>
            </>
        )
    }
</div>

<style>
    #expand-notes:checked ~ label .view-more {
        display: none;
    }
    #expand-notes:checked ~ label .view-less {
        display: block;
    }
</style>
